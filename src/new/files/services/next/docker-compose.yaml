version: "3.5"

networks:
  proxy:
    name: tier_1

services:
  <%= name %>:
    image: ${REGISTRY}<%= name %>:latest
    container_name: ${COMPOSE_PROJECT_NAME}.<%= name %>
    restart: unless-stopped
    build:
      context: ./services/<%= name %>
      dockerfile: ./docker/Dockerfile
    environment:
      - NODE_ENV=${NODE_ENV}
      - PORT=9000
      - VIRTUAL_HOST=<%= name %>
    volumes:
      - ./services/<%= name %>/src:/app
    networks:
      - proxy
